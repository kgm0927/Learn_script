각 가상 라우터는 별도의 네트워크 네임스페이스로 구현됩니다.
### **네트워크 네임스페이스 및 veth 인터페이스 설정**

다섯 개의 라우터를 가상 환경에서 설정하는 방법을 보여드리겠습니다. 각 라우터는 하나 이상의 네트워크 인터페이스를 가지고 있으며, 서로 연결됩니다.

``` bash
sudo ip netns add R1 
sudo ip netns add R2 
sudo ip netns add R3 
sudo ip netns add R4 
sudo ip netns add R5
```

ip netns는 네임 스페이스에 관련된 내용이다.

---
### 1. 브리지를 이용하여 연결

`eth0.10`과 `eth0.12`를 같은 브리지에 연결하면 두 인터페이스가 마치 스위치에 연결된 것처럼 동작합니다.


#### 1. 브리지 인터페이스 생성

브리지를 만들고, 두 인터페이스(`eth0.10`, `eth0.12`)를 브리지에 연결합니다.



``` bash
sudo ip link add br0 type bridge 
sudo ip link set br0 up
```

#### 2. `eth0.10`과 `eth0.12`를 브리지에 연결

`eth0.10`과 `eth0.12`를 브리지 인터페이스(`br0`)에 추가합니다.

``` bash
sudo ip link set eth0.10 master br0 
sudo ip link set eth0.12 master br0
```


### 3. 네트워크 설정

`br0` 브리지 인터페이스에 IP 주소를 설정합니다. 예를 들어, `192.168.1.1/24` IP를 설정:

``` bash
sudo ip addr add 192.168.1.1/24 dev br0
```


이제 `eth0.10`과 `eth0.12`는 브리지 `br0`를 통해 연결됩니다. `br0`에 연결된 다른 네트워크 장비는 동일한 네트워크에서 통신할 수 있습니다.


---
### `R1` 네임스페이스에 접속


`ip netns exec` 명령을 사용하여 `R1` 네임스페이스에 들어갑니다.

``` bash
sudo ip netns exec R1 bash
```

위 명령은 `R1` 네임스페이스 내부에서 명령을 실행할 수 있는 셸을 열어줍니다.

---
### 2. 네트워크 인터페이스 상태 확인

네임스페이스 내부에서 다음 명령으로 네트워크 인터페이스 상태를 확인합니다.

``` bash

`ip link show`

```


```
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 

2: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000 link/ether 02:42:c0:a8:0a:01 brd 

ff:ff:ff:ff:ff:ff 3: eth2: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000 link/ether 02:42:c0:a8:14:01 brd ff:ff:ff:ff:ff:ff
```



마지막으로 현재 진행중인 네임스페이스를 확인하려면 이렇게 하면된다.

``` bash

┌──(root㉿kali)-[/home/kali]
└─# ip netns identify
R1
```

---
### `ip netns identify`


`ip netns identify` 명령은 특정 네트워크 네임스페이스와 관련된 프로세스가 실행 중인지 확인하기 위한 명령입니다. 이 명령은 네임스페이스에 속한 프로세스가 없을 경우 아무 출력도 생성하지 않습니다.