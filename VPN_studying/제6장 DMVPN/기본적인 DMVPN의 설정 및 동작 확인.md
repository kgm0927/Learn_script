

지사가 많은 회사의 VPN 망 확장성을 생각해 보자. 각 지사마다 일일이 크립토 세션 및 라우팅을 설정해야 한다. 또는 GRE 터널을 뚫어 라우팅 정보를 공유할 수도 있어나, 수 많은 지사 사이에 일일이 GRE 터널을 뚫는 것도 힘든 작업이다. 이 때 DMVPN(dynamic multipoint VPN)을 사용하면 편리하다.


DMVPN은 mVPN(multipoint GRE) 터널과 NHRP(next hop resolution protocol)를 사용하여 확장성 문제를 해결한다. DMVPN은 본사와 지사라는 허브 앤 스포크(hub-and-spoke) 구조를 사용한다.

허브 앤 스포크 구조라도 지사간에 직접 통신을 할 수 있다. 그러나, 지사 VPN 장비가 NHRP를 이용하여 주소를 등록하기 위하여 본사 장비가 필요하다. 지사 장비가 다른 지사 장비와의 통신을 위해서 본사 장비로 목적지 네트워크와 연결되는 주소를 질의하면, 본사 장비가 목적지 네트워크와 연결되는 IP 주소를 알려준다. 이후 두 개의 지사간에 직접 통신이 이루어진다.

이를 위하여 지사 장비가 부팅되면 자동으로 본사 장비와 IPsec 세션을 맺고 NHRP를 이용하여 자신의 IP 주소를 등록한다. 데이터와 라우팅 정보 전송을 위하여 MGRE 터널이 사용된다.

결과적으로 DMVPN은 다음과 같은 장점이 있다.


- 지사 장비는 다른 지사 장비와 일일이 GRE 터널 및 크립토 맵을 설정할 필요가 없다.
- 