

---
# 중복줄 제거 및 표시


uniq 명령어는 종종 **sort**와 연결하여 사용한다. **uniq** 명령어는 표준 입력이나 하나의 파일명 인자로부터 정렬된 데이터 목록을 입력받아 중복된 내용을 제거해준다.(자세한 정보는 uniq man 페이지를 참조하라.) 따라서 중복되는 부분이 없는지 확실히 하려면(즉, /bin 과 /usr/bin 디렉토리 내에서 보이는 동일한 이름의 프로그램)uniq 명령어를 파이프라인에 추가하면 된다.


``` shell
kgm0917@DESKTOP-DT2VQLB:~$ ls /bin /usr/bin |sort|uniq|less
```

이 예제에서 uniq 명령어를 사용하여 sort 명령어의 출력 결과로 나타난 중복된 내용을 삭제한다. 반대로 중복된 내용을 보고 싶다면 `–d`옵션을 사용해야 한다.

---
###  uniq- 중복행 생략 및 보고

sort와 달리 uniq는 경량 프로그램이다. uniq는 겉보기에 사소한 작업을 수행한다. 정렬된 파일이 주어진 경우(표준 입력을 포함), 이 프로그램은 모든 중복 행을 제거하고 그 결과를 표준 출력으로 보낸다. 그것은 중복 결과를 정리하기 위해 sort와 함께 종종 사용된다.


>[!tip] 저자주
>uniq는 sort와 함께 사용되는 전통적인 유닉스 툴인 반면, GNU 버전의 sort는 정렬된 결과로부터 중복을 제거하는 -u 옵션을 제공하여 동일한 기능을 한다.


이를 위해 텍스트 파일을 만들어보자.

``` shell
┌──(kali㉿kali)-[~]
└─$ cat > foo.txt
a
b
c
a
b
c

```

표준 입력을 종료하기 위해 'ctrl-D'를 입력해야 한다. 이제 uniq를 텍스트 파일에 실행하면, 그 결과는 원본과 동일할 것이다. 중복된 내용이 제거되지 않았기 때문이다.

``` shell
                                                                                                                   
┌──(kali㉿kali)-[~]
└─$ uniq foo.txt              
a
b
c
a
b
c

```

uniq로 작업을 하기 위해서는 먼저 입력 내용이 반드시 정렬되어 있어야 한다.

``` shell
┌──(kali㉿kali)-[~]
└─$ sort foo.txt |uniq                 
a
b
c

```

uniq가 단지 인접한 행들의 중복만을 제거하기 때문에 이와 같이 보인다.

uniq의 옵션들 중 흔히 사용하는 것을 위주로 [표 20-2]에 나열하였다.


- [표 20-2] uniq 주요 옵션


| 옵션     | 설명                                                                          |
| ------ | --------------------------------------------------------------------------- |
| -c     | 중복 발생 횟수와 함께 중복 행의 목록을 출력한다.                                                |
| -d     | 유일한 행이 아닌 중복된 행들만을 출력한다.                                                    |
| -f n   | 각 행에서 *n*필드까지 무시한다. sort에서 공백으로 필드를 구분한 것과 달리 uniq는 다른 필드 구분자를 설정하는 옵션이 없다. |
| -i     | 행 비교 시 대소문자를 구별을 하지 않는다.                                                    |
| -s *n* | 각 행의 *n*개의 문자까지 무시한다.                                                       |
| -u     | 유일한 행들만 출력한다. 이 옵션이 기본값이다.                                                  |

여기서는 텍스트 파일의 중복된 행 수를 보기 위해 uniq의 -c 옵션을 함께 사용한다.

``` shell
┌──(kali㉿kali)-[~]
└─$ sort foo.txt | uniq -c
      2 a
      2 b
      2 c

```