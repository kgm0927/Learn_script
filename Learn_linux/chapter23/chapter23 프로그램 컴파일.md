

### 이 장에서는 소스 코드를 컴파일하여 프로그램을 만드는 법을 살펴볼 것이다. 리눅스의 기본적인 자유로움은 소스 코드의 사용에서 비롯된다. 리눅스 생태계 전체는 개발자들의 자유로운 교류에 의지한다. 대다수의 데스크톱 사용자들에게 컴파일은 잊혀진 기술이다. 예전에는 꽤 흔히 사용되었지만, 현재는 배포판 공급업체에서 이미 컴파일된 바이너리들을 저장소에 관리하기 때문에 다운로드해서 바로 사용할 수 있다. 이 글을 작성하는 시점에, 데비안 저장소(가장 큰 저장소 중 하나인)는 약 23,000 패키지들을 가지고 있다.


그래서 왜 소프트웨어를 컴파일해야 하나? 여기에는 2가지 이유가 있다.

- **가용성**: 배포판 저장소에 있는 다수의 사용가능한 프로그램에도 불구하고, 어떤 배포판은 사용자가 원하는 모든 프로그램을 가지고 있지 않을 수도 있다. 이런 경우, 필요한 프로그램을 얻는 방법은 소스로부터 그 프로그램을 컴파일하여 만드는 것 뿐이다.
- **적시성**: 어떤 배포판은 최신 버전의 프로그램들을 가지고 있는 반면, 그렇지 않은 경우도 있다. 이는 가장 최신 버전을 갖기 위해서는 컴파일이 필수적이라는 것이다.


소스 코드를 컴파일하여 소프트웨어를 만드는 것은 많은 사용자의 목표에서 벗어나 매우 복잡한 기술이 필요할 수도 있다. 그러나 많은 컴파일 작업들이 생각보다 쉽고 몇 가지 과정만 거치면 된다. 그것은 전적으로 패키지에 달려 있다. 컴파일 과정의 개요와 추가적인 스터디를 할 사용자들에게 출발점을 제공하기 위해 매우 간단한 예제를 살펴볼 것이다.

이 장에서는 한 가지 명령어를 소개할 것이다.

- [[make]] - 프로그램 관리 유틸리티

---

# 컴파일링이란?

간단히 말하면 컴파일링이란 **소스 코드**(프로그래머에 의해 작성된, 사람이 읽을 수 있는 형태의 프로그램 서술)를 컴퓨터 프로세서의 언어로 번역하는 절차다.

컴퓨터 프로세서(또는 CPU)는 매우 기본적인 단계에서 동작한다. 그것은 **기계어**로 프로그램들을 실행한다. 기계어는 "바이트 더하기","메모리 위치 가리키기" 등과 같이 간단한 명령들을 설명하는 숫자 코드다. 각각의 명령어들은 이진법(0,1)으로 표현된다. 최초의 컴퓨터 프로그램들은 이 숫자 코드로 쓰여졌고, 이는 왜 프로그래머들이 담배를 많이 피우고 엄청난 양의 커피를 마신다고 하고, 두꺼운 안경을 쓰는지 설명이 될 지도 모르겠다.

이 문제는 **어셈블리어**의 출현으로 극복됐다. 숫자 코드를 대신하기 때문에 CPY(copy), MOV(move)와 같은 더 쉽게 사용할 수 있는 연상기호(니모닉)를 사용하였다. 어셈블리어로 짜인 프로그램들은 **어셈블러**라는 프로그램에 의해 기계어로 처리된다. 어셈블리어는 **디바이스 드라이버**와 **임베디드 시스템** 등과 같은 특정 작업에서 여전히 오늘날까지 사용되고 있다.

인기 있는 프로그래밍 언어가 다수 존재하지만, 그 중 두 언어가 우위를 차지하고 있다. 현 시스템의 대다수 프로그램들은 C나 C++ 언어로 작성되었다. 다음의 다룰 예제에서 C 프로그램을 컴파일할 것이다.

고급 프로그래밍 언어로 작성된 프로그램은 **컴파일러**라고 하는 프로그램에 의해 처리되어 기계어로 변환된다. 일부 컴파일러는 고급 명령어들을 어셈블리어로 바꾸고 나서 어셈블러를 사용하여 기계어 번역의 최종 단계를 수행한다.

컴파일링과 함께 자주 사용되는 절차를 **링킹**이라고 한다. 프로그램들은 파일 열기와 같은 공통적인 작업들을 많이 수행한다. 많은 프로그램들이 이런 작업을 수행하지만, 프로그램마다 각각 파일 열기 루틴을 구현한다면 그것은 낭비일 것이다. 파일을 여는 방법이 정의된 프로그램 코드를 필요로 하는 모든 프로그램이 공유하게 하는 것이 더 현명하다. 이처럼 공통 작업의 지원은 **라이브러리**를 통해 이루어진다. 그것은 복수의 루틴을 포함하며, 복수의 프로그램에서 공유할 수 있는 공통 작업들을 각각 수행한다. /lib와 /usr/lib 디렉토리를 살펴보면, 라이브러리의 대다수를 볼 수 있다. **링커**라는 프로그램은 컴파일러의 출력물과 컴파일된 프로그램이 필요한 라이브러리를 연결하는데 사용된다. 이 프로세스의 최종 결과물은 사용한 준비가 된 완료된 **실행파일**이다.


### 모든 프로그램이 컴파일되는가?

그건 아니다. 이미 본 것처럼, 쉘 스크립트와 같은 일부 프로그램들은 컴파일은 필요 없고 직접 실행된다. 이들은 **스크립트** 또는 **인터프리터 언어**로 알려진 프로그래밍 언어로 작성되었다. 이러한 언어들은 최근 몇 년 새에 인기가 상승하였으며, 펄(Perl), 파이썬(Python), PHP, 루비(Ruby) 등과 같은 언어가 이에 해당한다.


스크립트 언어는 **인터프리터**라고 불리는 특수한 프로그램에 의해 실행된다. 인터프리터는 프로그램 파일을 입력 받아 읽고 파일 내부의 각 명령어들을 실행한다. 일반적으로 인터프리트된 프로그램들은 컴파일된 파일보다 아주 느리게 실행된다. 이것은 인터프리트된 프로그램 내의 소스 코드 명령이 매번 번역되고 실행되기 때문이다. 반면 컴파일된 프로그램의 소스 코드는 한 번만 해석되고 이 내용은 최종 실행 파일에 영구적으로 기록된다.


그럼 왜 인터프리트 언어가 그렇게 인기 있을까? 많은 프로그래밍 허드렛일에 "충분히 빠른" 결과를 보이지만, 실제적인 장점은 일반적으로 컴파일된 프로그램보다 더 빠르고 쉽게 프로그램을 개발할 수 있다는 것이다. 프로그램은 항상 코드, 컴파일, 테스트의 반복 순환으로 개발된다. 프로그램의 크기가 커짐에 따라 컴파일 단계는 오랜 시간이 걸릴 수 있다. 인터프리트 언어는 그러한 컴퓨터 컴파일 단계가 없어서 프로그램 개발 속도를 낼 수 있다.