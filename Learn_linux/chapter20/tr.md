
### 문자들을 변환 또는 삭제하기

tr 프로그램들은 문자들은 **변환**(transliterate)하는 데 사용된다. 이것은 문자 기반 검색 및 치환 작업의 일종으로 생각될 수 있다. 문자 변환는 하나의 알파벳에서 다른 것으로 문자들을 변경하는 작업이다. 예를 들면, 소문자에서 대문자로 문자들을 변환하는 것이다. tr를 사용해서 다음과 같이 변환할 수 있다.

``` shell
┌──(kali㉿kali)-[~]
└─$ echo "lowercase letters" | tr a-z A-Z                              
LOWERCASE LETTERS

```

보는 것처럼 tr은 표준 입력을 받아 표준 출력으로 결과를 전달한다. tr은 변환할 문자열 잡합과 이에 상응하는 변환될 문자열 집합의 두 인자를 받는다. 문자 집합은 다음 세 가지 방식 중 하나로 표현된다.

- 열거 목록 : 예를 들면, ABCDEFGHIJKLMN0PQRSTUVWXYZ
- 문자 범위: 예를 들면, A-Z. 이 방식을 때때로 다른 명령어들과 동일한 문제를 겪게 된다(로케일 조합 순서 때문에). 따라서 주의 깊게 사용해야 한다.
- POSIX 문자 클래스: 예를 들면, `[:upper:]`.

대부분의 경우에, 문자 집합은 동일한 길이어야 한다. 하지만, 특별히 여러 문자들을 하나의 문자로 변환하기를 원한다면 첫 번째 집합을 두 번째보다 더 크게 만들 수 있다.


``` shell
┌──(kali㉿kali)-[~]
└─$ echo "lowercase letters" | tr [:lower:] A
AAAAAAAAA AAAAAAA

```

추가적인 문자 변환으로, tr은 문자열을 단순히 입력 스트림에서 삭제할 수 있다. 이 장 초반부에서 MS-DOS 텍스트 파일을 유닉스 스타일의 텍스트로 변환하는 문제에 대해 다루었다. ==이 변환을 위해, 각 행의 끝에서 캐리지 리턴 문자를 제거할 필요가 있다.== tr를 사용하여 같이 수행할 수 있다.

`tr -d '\r' < dos_file > unix_file`

*dos_file*에는 변환된 파일을, *unix_file*에는 결과 파일을 지정한다. 이 형식에서 이스케이스 문자열 \r을 사용하여 캐리지 리턴 문자를 표현한다. tr이 지원하는 문자열과 문자 클래스의 목록 전체를 보기 위해서는 다음 명령을 사용하라.

``` shell
┌──(kali㉿kali)-[~]
└─$ tr --help
```

>[!tip] ROT13: 비밀스럽지 않은 디코더 링
>tr의 재미있는 사용법 중 하나는 텍스트에 ROT13 **인코딩**을 수행하는 것이다. ROT13은 단순 치환 암호에 기반을 둔 기초적인 암호화 형태다. ROT13 **암호화**로 불리는 것은 관대한 표현이다. **텍스트 혼합**(text obfuscation)이라고 하는 게 좀 더 정확하다. 그것은 때때로 내용물을 보호하기 위해 텍스트를 모호하게 만드는 데 사용된다. 이 방식은 단순히 각 문자를 알파벳 13글자만큼 이동시킨 것이다. 이것은 알파벳 26개 문자의 절반이기 때문에 원래 형태로 복원하기 위해서는, 그 알고리즘을 두 번 실행하면 된다. 먼저 tr로 다음과 같이 인코딩한다.
>```
>                                                                                                        
┌──(kali㉿kali)-[~]
└─$ echo "secret text" | tr a-zA-Z n-za-mN-ZA-M
frperg grkg
>```
> 두 번째는 그 변환 결과에 동일한 명령을 수행한다.
> ``` shell
> ┌──(kali㉿kali)-[~]
└─$ echo "frperg grkg" | tr a-zA-Z n-za-mN-ZA-M
secret text
>```
>많은 이메일 프로그램과 유즈넷 뉴스리더가 ROT13 인코딩을 지원한다. 위키디피아의 https://ko.wikipedia.org/wiki/ROT13 에서 이 주제에 대해 다루고 있다.             
>



tr은 또 다른 트릭을 사용할 수 있다. -s 옵션을 사용하여 문자의 반복 개체를 축소할(삭제할) 수 있다.

``` shell
                                                                                                                   
┌──(kali㉿kali)-[~]
└─$ echo "aaabbbccc" | tr -s ab                
abccc
     
```


여기 반복되는 문자들을 가진 문자열이 있다. tr에 ab를 명시하여 그 문자들의 반복 개체를 제거한다. c는 명시되지 않았기에 변경 없이 그대로 남아있는다. 반복 문지들은 반드시 인접해야 한다는 것을 명시해야 한다. 만약 그렇지 않으면, 아무런 효과가 적용되지 않는다.

``` shell
┌──(kali㉿kali)-[~]
└─$ echo "abcabcabc" | tr -s ab
abcabcabc

```
