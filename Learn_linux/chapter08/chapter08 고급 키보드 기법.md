

이전 챕터: [[chapter07 확장과 인용]]


이번 장에서는 키보드를 더 빠르고 효율적으로 사용할 수 있는 bash 기능을 자세히 살펴볼 것이다.

다음 명령어들을 살펴볼 것이다.


- clear- 화면 지우기
- [[history]]- 히스토리 표시하기

---
# 커맨드라인 편집

bash는 Readline이라고 하는 라이브러리를 사용하는데, 이것으로 커맨드라인을 편집할 수 있다. 우리는 이미 이것의 일부를 공부했다. 예를 들어, 화살표 키로 커서를 이동하는 것 같은, 하지만 더 많은 기능들을 가지고 있다.

[^1]부가 도구이므로 다 알 필요는 없다. 원하는 것을 선택하여 사용하도록 하자.


- 커서 이동

커서를 이동할 때 사용하는 키 목록이다.


[표 8-1] 커서 이동 명령어

| 키      | 실행                                      |
| ------ | --------------------------------------- |
| ctrl-A | 줄 맨 앞으로 커서 이동                           |
| ctrl-E | 줄 맨 끝으로 커서 이동                           |
| ctrl-F | 다음 한 글자로 커서 이동, 오른쪽 화살표 키와 동일함          |
| ctrl-B | 이전 한 글자로 커서 이동, 왼쪽 화살표 키와 동일함           |
| alt-F  | 다음 한 단어로 커서 이동                          |
| alt-B  | 이전 한 단어로 커서 이동                          |
| ctrl-L | 화면을 지우고 커서를 외쪽 최상단으로 이동. clear 명령어와 동일함 |


- 텍스트 수정

위의 표에서는 커맨드라인상에서 글자를 수정할 때 사용하는 키보드 명령어 목록이다.


- 텍스트 잘라내기 및 붙이기 (텍스트 지우고 복사하기)

Readline 문서는 **killing**(텍스트 지우기)와 **Yanking**(텍스트 복사하기)라는 용어를 사용하는데 각각 의미하는 바는 잘라내기와 붙이기로 흔히 불린다.

잘라낸 데이터는 **kill-ring**이라고 하는 버퍼에 저장된다.


[표 8-2] 텍스트 편집 명령어

| 키      | 실행                                     |
| ------ | -------------------------------------- |
| ctrl-D | 현재 커서 위치에 있는 글자 지우기                    |
| ctrl-T | 현재 커서 위치에 있는 글자와 바로 앞 글자의 위치 바꾸기       |
| alt-T  | 현재 커서 위치에 있는 단어와 바로 앞 단어의 위치 바꾸기       |
| alt-L  | 현재 커서 위치에 있는 글자부터 그 단어 끝 부분까지 소문자로 바꾸기 |
| alt-U  | 현재 커서 위치에 있는 글자부터 그 단어 끝부분까지 대문자로 바꾸기  |

[표 8-3] 잘라내기/붙이기 명령어

| 키             | 실행                                                                       |
| ------------- | ------------------------------------------------------------------------ |
| ctrl-K        | 현재 커서 위치로부터 그 줄 끝 부분까지 텍스트 지우기                                           |
| ctrl-U        | 현재 커서 위치로부터 그 줄 처음 부분까지 텍스트 지우기                                          |
| alt-D         | 현재 커서 위치에서부터 그 단어 끝부분까지 텍스트 지우기                                          |
| alt-BACKSPACE | 현재 커서 위치에서부터 그 단어 앞부분까지 텍스트 삭제하기. 단, 커서가 단어 맨 앞에 위치하고 있다면 바로 앞 단어를 삭제한다. |
| ctrl-Y        | kill-ring에 있는 텍스트를 복사해서 현재 커서 위치에 삽입하기                                   |


- ***==부연 설명==***


메타 키(meta)

bash man 페이지의 “READLINE” 섹션에 있는 Readline 문서를 살펴보다 보면 **메타 키**라는 용어를 보게 될 것이다. 요즘 키보드에는 alt 킷가 대신하고 있지만 꼭 그렇지는 않다.

과거 터미널을 썼던 시절, **터미널**은 텍스트 화면과 키보드가 있는 통신 장치로 텍스트나 커서를 이동할 수 있는 정도의 전자 장치였다. 이는 보다 큰 컴퓨터나 그런 컴퓨터의 통신 네트워크에 연결되었다. 또한, ASCII 코드를 최소한 이해하도록 만들어졌기 때문에, 호환성이 좋은 애플리케이션을 원하던 소프트웨어 개발자들은 최소한의 공통분모를 찾아서 프로그램을 만들었다. 유닉스 시스템은 터미널과 각기 다른 화면 표시 기능을 처리하는 매우 정교한 방법을 가지고 있다. Readline 개발자들은 기타 여분의 컨트롤 전용 키가 있는지 확신할 수 없었기 때문에 **메타**(meta)라는 새로운 키를 만들어 냈다.

alt 키가 요즘 키보드에서 메타 키를 대신하고 있지만 여전히 터미널을 사용하고 있다면, alt를 누르는 것과 같은 결과를 얻기 위해 esc 키를 눌렀다 놓을 수 있다.


---
# 자동 완성

쉘이 작업을 수얼하게 해주는 또 다른 방법은 **자동 완성 기능**이다. 명령어를 누르는 동안 키를 누르면 자동 완성 기능이 작동한다. 홈 디렉토리를 확인해보자.


``` shell
kgm0917@DESKTOP-DT2VQLB:~$ ls

Pics lazy_dog.txt ls-error.txt ls-output.txt ls.txt movie.mpeg
```

다음과 같이 입력하되 **엔터키를 누르지 않는다.**

``` shell
kgm0917@DESKTOP-DT2VQLB:~$ ls l
```

이제 탭 키를 입력한다.


``` shell
kgm0917@DESKTOP-DT2VQLB:~$ ls l

lazy_dog.txt ls-error.txt ls-output.txt ls.txt
```

(여기서는 책에 나와 있는 것과 상당히 다르게 나온다. 책에서는 ls 뒤에 그냥 파일이 따라 나오지만, 내가 쓰고 있는 우분투에서는 ~ 안의 모든 파일이 나온다.)

이제 이 부분은 엔터키를 누르지 않고 탭키를 눌러본다.


``` shell
kgm0917@DESKTOP-DT2VQLB:~$ ls D
```


알람 소리만 난다. 이는 디렉토리 내의 D로 시작하는 것이 하나 이상이기 때문이다. 자동 완성 기능이 제대로 이루어지려면 여러분이 입력하는 일종의 “단서”가 모호해서는 안된다.


``` shell
kgm0917@DESKTOP-DT2VQLB:~$ ls ls

```

을 입력하고 탭 키를 누르면


``` shell
kgm0917@DESKTOP-DT2VQLB:~$ ls ls

ls-error.txt ls-output.txt ls.txt
```


자동완성에 성공했다.

이 예제는 경로명을 자동 완성해주는 것을 보여주고 있는데, 가장 흔히 경로명뿐만 아니라 변수(단어가 $로 시작할 때), 사용자명(~), 명령어, 그리고 호스트명(@기호로 시작할 때) 사용이 가능하다.

호스트명에 대한 자동 완성은 /etc/hosts 디렉토리에 있는 호스트명에만 해당된다.

[표 8-4] 자동 완성 명령어

| 키     | 실행                                                                  |
| ----- | ------------------------------------------------------------------- |
| alt-? | 가능한 자동 완성 목록을 보여준다. 대부분의 시스템에서 탭 키를 두 번 입력하면 볼 수 있으며, 보다 작업이 수월해진다. |
| alt-* | 가능한 모든 자동 완성 목록을 삽입한다. 한 개 이상의 해당 목록을 보고 싶을 때 유용하다.                 |

- ***==부연 설명==***

**프로그램 가능한 자동 완성**

bash 최신 버전은 프로그래머블(programmable) 자동 완성이라고 하는 기능을 지원한다. 이것은 사용자가 직접 새로운 자동 완성 규칙을 추가할 수 있게 해 준다. 보통 특수한 애플리케이션을 지원하고자 사용되는데, 예를 들어서 명령어의 옵션 목록에 대한 자동 완성 기능을 추가할 수 있고 또는 애플리케이션이 지원하는 특정한 파일 형식을 찾을 수 있다. 우분투는 상당히 방대한 규칙이 기본적으로 정의되어 있다. 프로그램머블 자동 완성은 일종의 작은 쉘 스크립트로 구현이 되는데, 이는 추후에 다룬다.





[^1]: 다음에 있는 일부 키 입력 순서는 GUI 환경에서 정의된 기능과 충돌할 수 도 있다. 가상 콘솔에서는 시퀀스가 정상적으로 작동한다.


---
다음 챕터: [[chapter09 퍼미션]]