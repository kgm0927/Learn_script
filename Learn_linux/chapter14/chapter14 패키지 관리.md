
#### 리눅스 커뮤니티에서 지내다 보면, 어떤 리눅스 배포판이 "최고"인지에 대한 많은 이야기들이 오고 가곤 한다. 때론 이러한 논쟁들이 유치하게 느껴지기도 한다. 특히 데스크톱 배경화면이나 그 외 소소한 것들에 대해서 논할 때 그렇다(일부는 우분투의 기본 색상 체계가 맘에 들지 않아서 우분투를 사용하지 않는다).

리눅스 배포판을 평가함에 있어 가장 결정적이고 중요한 요인은 바로 **패키지 시스템**과 그 배포판을 대상으로 한 리눅스 커뮤니티의 활성화 여부다. 많은 시간 리눅스를 다루다 보면 리눅스용 소프트웨어의 범위가 굉장히 광범위하다는 것을 깨닫게 된다. 사실 모든 것은 변하기 마련이다. 최고의 리눅스 배포판 대부분도 6개월마다 새 버전을 릴리즈하고 개별 프로그램들은 매일매일 업데이트 된다. 이렇게 어마어마한 양의 소프트웨어를 유지하기 위해서는 패키지 관리를 위한 좋은 툴이 필요하다.

**패키지 관리**란 시스템에 소프트웨어를 설치하고 유지 및 관리하는 방법을 말한다. 오늘날, 대다수의 사람들의 배포업체로부터 **패키지**를 설치함으로써 그들이 필요한 모든 소프트웨어를 충족시킬 수 있다. 이것은 리눅스 초기와는 상반된 현상이다. 그 당시에는 소프트웨어를 설치하려면 **소스 코드**를 다운로드 받아서 컴파일까지 직접 했어야 했다. 소스 코드를 컴파일하는 것 자체가 문제가 되는 것은 아니다. 사실 그런 소스 코드에 접근할 수 있다는 것 자체가 리눅스의 경이로움 아닌가, 이로 인해 우리뿐만 아니라 리눅스 사용자가 모두가 시스템을 검증하고 개선시킬 수 있다. 컴파일되기 전의 소스 코드로 작업하는 것이 조금 더 빠르고 쉬운 것뿐이다.

이 장에서는 ㅍ내키지 관리에 필요한 몇 가지 커맨드라인 툴에 대해 살펴보도록 한다. 유명한 배포판에서는 시스템 관리를 위해 매우 강력하고 세련된 그래픽 환경을 지원하지만, 커맨드라인 프로그램에 대해 알아두는 것도 매우 중요하다. 왜냐하면 그래픽 환경에서는 아주 까다로운 (또는 불가능한) 작업까지도 커맨드라인 프로그램에서 가능하기 때문이다.

---
# 패키지 시스템


리눅스 베포판마다 각기 다른 패키지 시스템을 운영한다. 그리고 일반적인 특정 배포한을 위해 만들어진 패키지는 다른 배포판과 호환되지 않는다. 대부분의 배포판들은 크게 두 진영으로 나뉘는데, 그 첫째가 바로 데비안, `.deb` 진영이고, 나머지가 레드햇 `.rpm` 진영이다. 물론 예외도 있다. 젠투(Gentoo), 슬랙웨어(SlackWare), 포어사이트(Foresight) 등 이 예외에 해당하지만 다음의 [표 14-1]에서 볼 수 있듯이 대부분의 배포판은 두 진영 중 하나에 해당된다.

- [표 14-1] 주요 패키지 시스템 분류

| 패키지 시스템 | 배포판(일부만 나열)                                                             |
| ------- | ----------------------------------------------------------------------- |
| 데미안 스타일 | Debian, Ubuntu, Xandros, Linspire                                       |
| 레드햇 스타일 | Fedora, CentOS, Red Hat Enterprise Linux, openSUSE, Mandriva, PCLinuxOS |


---
# 패키지 시스템 동작 원리


상업용 소프트웨어 산업에서 소프트웨어를 배포하는 방법은 "설치 디스크"를 구매한 후 "설치 마법사"를 실행하여 시스템에 최신 애플리케이션을 설치하는 방식이다.

반면 리눅스는 그렇지 않다. 사실상 거의 대부분의 리눅스용 소프트웨어들을 인터넷에서 다운로드하게 되어 있다. 리눅스 배포업체가 제공하는 소프트웨어들은 대개 패키지 파일 형태거나 직접 설치할 수 있도록 소스 코드 형태로도 제공한다. 23장에서 소스 코드를 직접 컴파일하여 시스템에 설치하는 방법에 대해서 알아볼 것이다.



### 패키지 파일

==패키지 시스템에서 소프트웨어의 가장 기본적인 단위를 패키지 파일이라고 한다.== **패키지 파일**은 소프트웨어 패키지를 구성하고 있는 파일들의 압축된 형태다. 패키지는 해당 프로그램을 지원하는 수 많은 프로그램들과 데이터 파일들로 구성되어 있을 것이다. 패키지 파일은 설치될 파일뿐만 아니라 해당 패키지 자체에 대한 메타데이터도 가지고 있다. 이를테면 패키지와 그 내용에 대한 텍스트 명세서와 같은 것이다. 패키지에는 패키지 설치 전과 설치 후에 각각의 설정 작업을 수행하는 스크립트가 있다.

패키지 파일은 **패키지 관리자**(package maintainer)라고 하는 사람에 의해 만들어지는데, 주로(항상 그런 것은 아니다) 베포판 회사 직원일 것이다. 패키지 상위 관리자는 **상위 배포자**(프로그램 원작자)에게 소스 코드 형태의 소프트웨어를 받아서 컴파일하고 패키지 메타데이터와 기타 필요한 설치 스크립트들을 만든다. 패키지 관리자는 종종 배포판의 다른 부분과 프로그램 통합을 향상시키기 위해 원본 소스 코드를 수정하기도 한다.


### 저장소

일부 소프트웨어 프로젝트는 직접 패키징과 배포를 함께 수행하기도 하지만, 요즘은 대다수의 패키지들이 배포판 회사와 관심을 가진 서드 파티(third parties)에 의해 만들어진다. 메인 저장소에서 보관하고 있는 수많은 패키지들은 단일 배포판 사용자만을 위한 것이고 이는 특별히 해당 배포판만을 위해 제작되고 관리된다.

하나의 배포판은 소프트웨어 개발주기의  각 단계에 따라 여러 개의 다른 저장소들을 운영할 수도 있다. 예를 들면, **테스트용 저장소**가 있다. 여기에 빌드된 패키지들을 올려서 일반적인 배포 형태로 릴리즈하기 전, 버그를 찾고자 하는 용감한 사용자들이 먼저 사용할 수 있도록 한다. 또한 **개발용 저장소**가 있는데 여기에는 다음에 주요 배포판에 포함될 작업 중인 패키지들이 저장된다.

이외에도 배포판은 서드 파티 저장소들과도 연관될 수 있다. 특허, 디지털 권리 관리(Digital Rights Management, DRM) 반 우회덤핑 문제와 같은 법적인 이유로 배포판에 포함시킬 수 없는 소프트웨어를 제공하기 위해 이러한 저장소가 때문이다. 아마도 가장 잘 알려진 예가 암호화된 DVD를 제공하는 경우인데 이는 미국에서 불법이기 때문이다. 서드 파티 저장소들은 소프트웨어 특허 및 반우회덤핑 법이 적용되지 않은 국가에서 사용 가능하다. 이러한 저장소들은 보통 그들이 지원하는 배포판에서 완전히 독립적이다. 그리고 이것을 사용할 누군가가 반드시 알아야 하는 내용들은 패키지 관린 시스템용 설정 파일에 포함시켜야 한다.


### 의존성


프로그램들은 거의 독립적이지 않다. 프로그램 작업을 수행하기 위해서는 다른 소프트웨어 구성 요소들을 의존하게 된다. ==예를 들면 입출력과 같은 기본 작업도 많은 프로그램들의 공유 루틴에 의해 제어된다.== 이러한 루틴들은 **공유 라이브러리**라고 하는 공간에 저장되고 다수의 프로그램들에 필수 서비스를 제공한다. 만일 패키지가 공유 라이브러리와 같은 공유 자원을 필요로 한다면 **의존성**(dependancy)이 있다고 말한다. 최신 패키지 관리 시스템은 모두 **의존성 문제를 해결**하기 위한 방안을 몇 가지 제공한다. 패키지가 설치될 때, 해당 패키지와 관련된 모든 의존성들까지 설치되도록 보장하기 위함이다.


### 고수준과 저수준 패키지 툴

패키지 관리 시스템은 보통 두 가지 형태의 툴을 가지고 있다. 하나는 **저수준 툴**로 패키지 파일을 설치학고 삭제하는 작업을 관리하고, 다른 하나인 **고수준 툴**은 메타데이터 검색 및 의존성 문제 해결과 같은 작업을 수행한다. 이 장에서는 데비안 계열 시스템(우분투를 비롯한 기타 여러 시스템)에서 제공하는 툴들과 최신 레드햇 제품에서 많이 사용되는 툴을 함께 살펴볼 것이다. 모든 레드햇 형식의 배포판들이 동일한 저수준 프로그램(rpm)에 의존하는 반면, 고수준 툴은 서로 다른 것을 사용한다. 우리가 다루게 될 것은 페도라, 레드햇 엔터프라이즈 리눅스, 센트 OS에서 사용하는 yum이다. 그 외 다른 레드햇 형식의 배포판들은 비슷한 기능의 고수준 툴을 제공한다(표 14-2 참고).


- [표 14-2] 패키지 시스템 도구


| 배포판                       | 저수준 도구 | 고수준 도구            |
| ------------------------- | ------ | ----------------- |
| 데비안 형식                    | dpkg   | apt-get, aptitude |
| 페도라, 레드햇 엔터프라이즈 리눅스, 센트OS | rpm    | yum               |


---
# 일반적인 패키지 관리 작업

많은 작업들이 커맨드라인 패키지 관리 도구로 수행한다. ==그 중에서도 가장 일반적인 것을 살펴보려고 한다. 한 가지 알아야 할 것은==, ==이 책의 범위 내에서 다루지 않는 패키지 파일 생성 작업은 저수준 도구에서 또한 지원된다는 것이다.==


다음 논의는 *package_name*은 실제 패키지의 이름이지만 *package_file*은 해당 패키지를 포함하고 있는 파일 이름을 가리킨다는 것이다.

### 저장소에서 패키지 찾기

저장소 메타데이터 검색 시 고수준 도구를 이용하여 패키지 이름이나 설명을 기반으로 패키지를 찾을 수 있다(표 14-3 참조).


- [표 14-3] 패키지 검색 명령어

| 형식  | 명령어                                               |
| --- | ------------------------------------------------- |
| 데비안 | apt-get update , apt-cache search *search_string* |
| 레드햇 | yum search *search_string*                        |

예시:  레드햇 시스템에서 emacs 텍스트 편집기에 대한 yum 저장소를 검색해보자.

`yum search emacs`


### 저장소에 있는 패키지 설치하기

고수준 도구로 저장소에 있는 패키지를 다운로드하여 의존성 패키지들과 함께 설치할 수 있다([표 14-4] 참조).

- [표 14-4] 패키지 설치 명령어


| 형식  | 명령어                                            |
| --- | ---------------------------------------------- |
| 데비안 | apt-get update, apt-get install *package_name* |
| 레드햇 | yum install *package_name*                     |

예시: apt 저장소에 있는 emacs 텍스트 편집기를 데비안 시스템에 설치해보자.

``` shell
apt-get update; apt-get install emacs
```


### 패키지 파일에서 패키지 설치하기


저장소가 아닌 다른 출처에서 다운로드한 패키지 파일이라면 저수준 도구를 이용해서 직접 설치할 수 있다.(의존성 문제는 해결되지 않는다)(표 14-5 참조).


- [표 14-5] 저수준 패키지 설치 명령어

| 형식  | 명령어                           |
| --- | ----------------------------- |
| 데비안 | dpkg --install *package_file* |
| 레드햇 | rpm -i *package_file*         |

예시: emacs-22.1-7fc7-i386.rpm 패키지 파일을 저장소가 아닌 다른 곳에서 다운로드한 것이라면 다음과 같이 레드햇 시스템에 설치하면 된다.

``` shell
rpm -i emacs-22.1-7.fc7-i386.rpm
```

>[!tip] 저자주
>이 방법은 저수준의 rpm 프로그램을 사용하여 설치하는 것이기 때문에 어떠한 의존성 문제도 해결되지 않는다. rpm은 설치되지 않는 의존성 패키지가 발견되면 오류를 출력하고 종료할 것이다.



### 패키지 삭제하기


고수준 도구나 저수준 도구든 패키지를 삭제할 수 있다. 고수준 도구에 해당하는 명령어들을 [표 14-6]에서 살펴보자.

- [표 14-6] 패키지 삭제 명령어


| 형식  | 명령어                           |
| --- | ----------------------------- |
| 데비안 | apt-get remove *package_name* |
| 레드햇 | yum erase package_name        |

예시: 데비안 시스템에서 emacs 패키지를 삭제해보자.

`apt-get remove emacs`

### 저장소로부터 패키지 업데이트하기

가장 일반적인 패키지 관리 작업은 시스템을 항상 최신 버전 패키지로 유지하는 것이다. 고수준 도구로 이러한 중요한 작업을 한 번에 해결할 수 있다([표 14-7] 참고).


- [표 14-7] 패키지 업데이트 명령어


| 형식  | 명령어                             |
| --- | ------------------------------- |
| 데비안 | apt-get update; apt-get upgrade |
| 레드햇 | yum update                      |

예시: 데비안 시스템에 설치된 패키지 업데이트 적용하기

``` shell
apt-get update; apt-get upgrade
```



### 패키지 파일에서 패키지 업그레이드 하기

최신 버전 패키지를 저장소가 아닌 다른 곳에서 다운로드했더라도 이전 버전에서 최신 버전으로 재설치할 수 있다([표 14-8] 참조).


- [표 14-8] 저수준 패키지 업그레이드 명령어


| 형식  | 명령어                           |
| --- | ----------------------------- |
| 데비안 | dpkg --install *package_file* |
| 레드헷 | rpm -U *package_file*         |

예시: 레드햇에서 기존에 설치된 emacs를 emacs-22.1-7fc7-i386.rpm 패키지 파일에 포함된 최신 버전으로 업데이트 하기

``` shell
rpm -U emacs-22.1-7.fc7-i386.rpm
```

저자주: dpkg는 rpm과 같이 패키지 설치할 때와는 달리 업그레이드를 위한 별도의 옵션을 지원하지 않는다.


### 설치된 패키지 확인하기

[표 14-9]에 있는 명령어들은 시스템에 설치된 패키지를 확인할 때 사용하는 것들이다.


- [표 14-9] 패키지 목록 명령어

| 형식  | 명령어         |
| --- | ----------- |
| 데비안 | dpkg --list |
| 레드햇 | rpm -qa     |


### 패키지 설치여부 알아보기

[표 14-10]에 있는 저수준 도구로 해당 패키지가 설치되어 있는지 확인할 수 있다.

- [표 14-10] 패키지 설치확인 명령어

| 형식  | 명령어                          |
| --- | ---------------------------- |
| 데비안 | dpkg --status *package_name* |
| 레드햇 | rpm -q *package_name*        |

예시: 데비안 시스템에서 emacs 패키지 설치 여부 확인하기

``` shell
dpkg -status emacs
```


### 설치된 패키지 정보 표시하기

설치된 패키지 이름을 알고 있다면 [표 14-11]에  있는 명령어로 해당 패키지 정보를 표시할 수 있다.


- [표 14-11] 패키지 정보 확인 명령어


| 형식  | 명령어                           |
| --- | ----------------------------- |
| 데비안 | apt-cache stow *package_name* |
| 레드햇 | yum info *package_name*       |

예시: 데비안 시스템의 emacs 패키지 정보 보기


``` shell

apt-cache show emacs
```


### 특정 파일과 관련된 패키지 검색하기

특정 파일을 설치하는 패키지를 확인할 때 [표 14-12]에 있는 명령어를 사용한다.

- [표 14-12] 패키지 파일(출처) 확인 명령어


| 형식  | 명령어                       |
| --- | ------------------------- |
| 데비안 | dpkg --search *file_name* |
| 레드헷 | rpm -qf *file_name*       |


예시: 레드햇 시스템에서 /usr/bin/vim 파일이 어떤 패키지에 의해 설치되었는지 알아보기

``` shell
rpm -qf /usr/bin/vim
```


---

# 마무리 노트

향후 우리가 살펴볼 것은, 광범위한 애플리케이션 영역을 포하하여 많은 프로그램들에 대한 내용이다. 대부분 이러한 프로그램들은 기본적으로 설치되어 있지만, 이따금 부가 기능을 위해 패키지를 설치해야 할 때도 있을 것이다. 따라서 패키지 관리에 대한 새로운 지식과 인지를 통해, 필요한 프로그램을 설치하고 관리하는 일에 능숙해져야 할 것이다.


>[!info] 리눅스 소프트웨어 설치에 관한 미신
>다른 플랫폼을 사용하다가 리눅스로 옮겨온 사용자들은 리눅스에 소프트웨어를 설치하는 것이 상당히 까다롭다든지 리눅스 배포판마다 다른 패키지 구조는 오히려 방해만 된다는 이야기에 속아 넘어가곤 했다. 아마도 소프트웨어를 베일에 쌓인 바이너리 형태로 배포하기만을 원하는 상업용 소프트웨어 벤더들에게는 방해물일 것이다.
>리눅스 소프트웨어의 생태계는 오픈소스 코드라는 개념에 기반을 두고 있다. 프로그램 개발자가 어떤 제품에 대한 소스 코드를 공개하면 특정 배포판을 사용하는 사람은 그 제품을 패키지화하고 해당 저장소에서 공유할 것이다. 이러한 방식 덕분에 그 제품이 특정 배포판에 문제 없이 잘 통합되어 있음을 보장하고 사용자는 각 제품마다 웹사이트를 일일이 검색해야 하는 대신 편리하게 한 곳에서 모두 원하는 것들을 찾을 수 있게 된다.
>장치 드라이버 또한 거의 비슷한 방법으로 관리된다. 다른 점이 있다면 배포판별로 각각 나뉘어 있는 것이 아니라 리눅스 커널 단위로 구분되다는 것이다. 즉 리눅스에는 "드라이버 디스크"라는 것은 존재하지 않는다. 커널은 장치를 지원하거나 그렇지 않을 수도 있지만 다양한 장치를 지원하고 있다. 사실 윈도우가 지원하는 것보다는 훨씬 많다. 물론 여러분들에게 필요한 장치가 지원되지 않는다면 이러한 사실이 위로가 될 수 없을 것이다.
>
>- **가장 최신 장치인 경우**: 많은 하드웨어 제조사들이 리눅스 개발 지원을 적극적으로 하지 않기 때문에 커널 드라이버 코드의 작성은 리눅스 커뮤니티의 몫이다. 따라서 시간이 걸릴 수 밖에 없다.
>- **이례적인 장치인 경우**: 모든 리눅스 배포판에서 가용한 모든 장치 드라이버를 지원해줄 수 없다. 각 배포판마다 고유의 커널이 빌드되고 그 커널들은 설정에 따라 달라지기 때문에(즉 리눅스는 손목시계에서부터 메인프레임까지 그 용도가 아주 다양하다) 용도에 따라 지원하지 않은 장치가 있을 수 있다. 드라이버의 소스 코드를 찾아서 다운로드하면 해당 드라이버를 직접 컴파일하고 설치할 수 있다. 이 과정은 그다지 어렵지 않지만 다소 복잡하긴 하다. 소프트웨어의 컴파일에 대한 것은 23장에서 알아볼 것이다.
>- **하드웨어 제조사가 감추고 싶은 것이 있을 때**: 리눅스 드라이브용으로 공개된 소스 코드가 없거나 드라이버를 만드는 데 필요한 기술 문서를 지원하지 않는 경우다. 즉 하드웨어 제조사가 장치에 대한 프로그램 이터페이스를 공개하려고 하지 않는다는 것이다. 일단 필자는 이러한 문제가 있는 하드웨어를 제거하고 다른 쓸모 없는 것들과 함께 휴지통에 던져버리기를 제안한다.
