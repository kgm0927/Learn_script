
### 자료 출력 및 포맷 지정하기

이 장의 다른 명령어들과 달리, printf 명령어는 파이프라인에서 사용되지도 않고(표준 입력을 허용하지 않는), 커맨드라인의 흔한 프로그램에서도 직접적으로 발견되지 않는다(대부분 스크립트에서 사용된다). 그럼 왜 그것이 중요한가? 왜냐하면 꽤 광범위하게 사용되기 때문이다.


**printf**(**포맷된 출력**이라는 구절에서 온)는 원래 C 프로그래밍 언어를 위해 개발되었다. 그리고 쉘을 포함하여 많은 프로그래밍 언어에서 구현되었다. 실제로 bash에는 printf가 내장되어 있다.

printf는 이처럼 작동한다.

`print " format" arguments`


그 명령에는 포맷 정보를 가진 문자열이 주어진다. 그러고 나서 인자 목록이 포맷 정보에 따라 적용된다. 포맷이 적용된 결과는 표준 출력으로 보내진다. 여기 간단한 예제가 있다.

``` shell
┌──(kali㉿kali)-[~]
└─$ printf "I formatted the string: %s\n" foo
I formatted the string: foo

```

포맷 문자열은 일반 텍스트(I formatted the string: 과 같은), 이스케이프 문자열(개행 문자인 \n처럼), 그리고 변환 지정이라 부르는 % 기호로 시작하는 문자열을 포함한다. 이 예제는 foo 문자열을 구성하고 이를 명령어의 출력으로 보내기 위해 변환 지정 %s가 사용된다. 다시 한번 보자.

``` shell
┌──(kali㉿kali)-[~]
└─$ printf "I formatted '%s' as a string. %s\n" foo
I formatted 'foo' as a string. 
                                  
```

우리가 보는 것처럼, 출력 결과에서 %s 변환 지정은 문자열 foo로 바뀌었다. s 변환은 문자열 자료를 구성하는 데 사용된다. 다른 자료형에 대한 지정자도 있다. [표 21-4]는 자주 사용되는 자료형에 대한 목록이다.

- [표 21-4] 주요 printf 자료형 지정자


| 지정자 | 설명                            |
| --- | ----------------------------- |
| d   | 부호를 가진 10진수 형태로 만든다.          |
| f   | 부동 소수점 수 형태로 만들고 출력한다.        |
| o   | 8진수 형태로 만든다.                  |
| s   | 문자열 형태로 만든다.                  |
| x   | 소문자 a에서 f를 이용해 16진수 형태로 만든다.  |
| X   | x와 동일하지만, 대문자를 사용한다.          |
| %   | 상수 기호 %를 출력한다(즉, `"%%"`를 명시). |

다음과 같이 문자열 380에 대한 각 변환 지정자를 적용하여 그 효과를 볼 것이다.

``` shell
┌──(kali㉿kali)-[~]
└─$ printf "%d, %f, %o, %s, %x, %X\n" 380 380 380 380 380 380
380, 380.000000, 574, 380, 17c, 17C

```

6개의 변환 지정자를 명시했기 때문에, 또한 printf에 6개의 인자를 제공해야 한다. 각 지정자가 적용된 6개의 결과를 보여준다.

출력 결과를 조정하기 위해 다수의 선택 요소들이 변환 지정자에 추가될 수 있다. 완전한 변환 지정은 다음과 같이 구성된다.

`%[flags][width][.precision] conversion_specification`

복수의 선택 요소들이 사용될 때, 반드시 이 명시된 순서대로 적절히 해석된다. [표 21-5]는 각 요소들에 대해 설명한다.


- [표 21-5] printf 변환 지정 요소


| 구성요소         | 설명                                                                                                                    |
| ------------ | --------------------------------------------------------------------------------------------------------------------- |
| flags        | 다섯 가지 플래그가 존재한다.                                                                                                      |
| ^            | `#` 출력을 위해 대체 포맷을 사용한다. 이는 자료형에 따라 다르다. o(8진수) 변환은 출력 결과에 0(숫자 0)이 앞에 붙는다. x와 X(16진수) 변환은 출력 결과에 각각 0x 또는 0X가 앞에 붙는다. |
| ^            | 0(숫자 0) 출력 결과에 0을 추가한다. 이는 000380처럼 필드 앞을 0으로 채운다는 것을 의미한다.                                                           |
| ^            | `-` (대시) 출력 결과를 왼쪽 정렬한다. 기본값은 오른쪽 정렬이다.                                                                               |
| ^            | (스페이스) 양수 앞에 공백을 생성한다.                                                                                                |
| ^            | +(더하기 기호) 양수에 부호를 붙인다. printf의 기본값은 음수에만 부호를 붙인다.                                                                     |
| *width*      | 최소 필드 너비를 지정한다.                                                                                                       |
| *.precision* | 부동 소수점 수의 소수점 뒷자리를 출력하기 위해 정밀도 자릿수를 지정한다. 문자 변환에서 *precision*은 출력될 문자 수를 지정한다.                                        |


[표 21-6]은 실제로 다른 포맷들을 사용한 예를 보여준다.

- [표 21-6] printf 변환 지정 예제 (314.p)


| 인자          | 포맷       | 결과          | 설명                                   |
| ----------- | -------- | ----------- | ------------------------------------ |
| 380         | "%d"     | 380         | 단순한 정수 형태로 나타낸다.                     |
| 380         | "%#x"    | 0x17c       | 대체 포맷 플래그를 사용하여 16진수 형태의 정수로 나타낸다.   |
| 380         | "%05d"   | 00380       | 0으로 시작하는 정수 형태로 나타내고 최소 필드 너비는 5자이다. |
| 380         | "%05.5f" | 0380.00000  | 최소 필드 너비가 10으로 증가했기 때문에 패딩이 적용된다.    |
| 380         | "%+d"    | +380        | +플래그는 양수에 부호를 붙인다.                   |
| 380         | "%-d"    | 380         | -플래그는 왼쪽 정렬을 한다.                     |
| abcdefghijk | "%5s"    | abcdefghijk | 문자열에 최소 필드 너비가 지정된다.                 |
| abcdefghijk | "%.5s"   | abcde       | 문자열에 정밀도를 적용하면 해당 크기만큼 자른다.          |
다시 말하지만, printf는 커맨드라인에 직접 사용되기보다 표 자료와 같은 형식을 지정하기 위해 스크립트에서 흔히 사용된다. 하지만  여전히 그것이 다양한 포맷 지정 문제를 해결하기 위해 사용될 수 있는지 볼 수 있다. 먼저 탭 문자로 구분된 필드를 출력해보자.

```shell
┌──(kali㉿kali)-[~]
└─$ printf "%s\t%s\t%s\n" str1 str2 str3                     
str1    str2    str3
                                
```

\t(탭을 나타내는 이스케이스 문자열)의 삽입으로 이 효과를 낼 수 있다. 다음은 정돈된 형태의 숫자를 살펴보자.

``` shell
┌──(kali㉿kali)-[~]
└─$ printf "Line: %05d %15.3f Result: %+15d\n" 1071 3.14156295 32589
Line: 01071           3.142 Result:          +32589

```

이것은 필드 영역에 최소 너비를 적용한 것을 보여준다. 또한 간단한 웹 페이지 형식은 어떨까?

```shell
┌──(kali㉿kali)-[~]
└─$ printf "<html>\n\t<head>\n\t\t<title>%s</title>\n\t</head>\n\t<body>\n\t\t<p>%s</p>\n\t</body>\n</html>\n" "Page Title" "Page Content"
<html>
        <head>
                <title>Page Title</title>
        </head>
        <body>
                <p>Page Content</p>
        </body>
</html>
           
```